{"version":3,"sources":["webpack:///./node_modules/core-js/library/fn/json/stringify.js","webpack:///./node_modules/core-js/modules/web.dom.iterable.js","webpack:///./src/components/Chat.vue?8b90","webpack:///src/components/Chat.vue","webpack:///./src/components/Chat.vue?61f6","webpack:///./src/components/Chat.vue","webpack:///./node_modules/@babel/runtime-corejs2/core-js/json/stringify.js","webpack:///./src/components/Chat.vue?fe1b"],"names":["core","__webpack_require__","$JSON","JSON","stringify","module","exports","it","apply","arguments","$iterators","getKeys","redefine","global","hide","Iterators","wks","ITERATOR","TO_STRING_TAG","ArrayValues","Array","DOMIterables","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","collections","i","length","key","NAME","explicit","Collection","proto","prototype","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$store","state","auth","name","directives","rawName","value","always","smooth","expression","attrs","height","_l","msg","index","message","createdAt","on","submit","$event","preventDefault","send","align-center","placeholder","color","prepend-inner-icon","model","callback","$$v","trim","flat","click","justify-center","_e","staticRenderFns","Chatvue_type_script_lang_js_","data","messages","token","localStorage","getItem","ws","feedback","methods","stringify_default","created","_created","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","self","_this","wrap","_context","prev","next","auth_axios","headers","Authorization","concat","sent","forEach","el","tmp","Date","getHours","getMinutes","push","WebSocket","addEventListener","_ref2","parse","t0","stop","components_Chatvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_style_index_0_id_6815141a_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chat_vue_vue_type_style_index_0_id_6815141a_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-38888637.790526f2.js","sourcesContent":["var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","var $iterators = require('./es6.array.iterator');\nvar getKeys = require('./_object-keys');\nvar redefine = require('./_redefine');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar wks = require('./_wks');\nvar ITERATOR = wks('iterator');\nvar TO_STRING_TAG = wks('toStringTag');\nvar ArrayValues = Iterators.Array;\n\nvar DOMIterables = {\n  CSSRuleList: true, // TODO: Not spec compliant, should be false.\n  CSSStyleDeclaration: false,\n  CSSValueList: false,\n  ClientRectList: false,\n  DOMRectList: false,\n  DOMStringList: false,\n  DOMTokenList: true,\n  DataTransferItemList: false,\n  FileList: false,\n  HTMLAllCollection: false,\n  HTMLCollection: false,\n  HTMLFormElement: false,\n  HTMLSelectElement: false,\n  MediaList: true, // TODO: Not spec compliant, should be false.\n  MimeTypeArray: false,\n  NamedNodeMap: false,\n  NodeList: true,\n  PaintRequestList: false,\n  Plugin: false,\n  PluginArray: false,\n  SVGLengthList: false,\n  SVGNumberList: false,\n  SVGPathSegList: false,\n  SVGPointList: false,\n  SVGStringList: false,\n  SVGTransformList: false,\n  SourceBufferList: false,\n  StyleSheetList: true, // TODO: Not spec compliant, should be false.\n  TextTrackCueList: false,\n  TextTrackList: false,\n  TouchList: false\n};\n\nfor (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {\n  var NAME = collections[i];\n  var explicit = DOMIterables[NAME];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  var key;\n  if (proto) {\n    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);\n    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-layout',[_c('v-flex',[_c('h4',{staticClass:\"text-xs-center display-1 red--text text--darken-3 pt-3 font-weight-thin\"},[_vm._v(_vm._s(this.$store.state.auth.name))])])],1),_c('v-layout',{staticClass:\"mt-3\"},[_c('v-flex',[_c('v-card',{directives:[{name:\"chat-scroll\",rawName:\"v-chat-scroll\",value:({always:false, smooth:true}),expression:\"{always:false, smooth:true}\"}],staticClass:\"py-3\",attrs:{\"height\":\"400\"}},_vm._l((_vm.messages),function(msg,index){return _c('ul',{key:index},[_c('li',{staticClass:\"red--text text--darken-3 subheading mb-1\"},[_vm._v(\"\\n            \"+_vm._s(msg.name)+\"\\n            \"),_c('span',{staticClass:\"body-1 font-weight-light grey--text text--darken-2 ml-3\"},[_vm._v(_vm._s(msg.message))])]),_c('li',{staticClass:\"subheading dark--text caption font-weight-thin mb-1\"},[_vm._v(_vm._s(msg.createdAt))]),_c('v-divider',{staticClass:\"py-2\"})],1)}),0)],1)],1),_c('v-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.send($event)}}},[_c('v-flex',[_c('v-card',{staticClass:\"py-2\"},[_c('v-layout',{attrs:{\"align-center\":\"\"}},[_c('v-text-field',{staticClass:\"mx-5 font-weight-light body-2\",attrs:{\"placeholder\":\"message\",\"color\":\"red darken-3\",\"prepend-inner-icon\":\"send\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"message\"}}),_c('v-btn',{attrs:{\"color\":\"red darken-3\",\"flat\":\"\"},on:{\"click\":_vm.send}},[_vm._v(\"Wyślij\")])],1),_c('v-layout',{attrs:{\"justify-center\":\"\"}},[(_vm.feedback)?_c('p',{staticClass:\"red--text text--accent-3 font-weight-light subheading\"},[_vm._v(\"Wiadomość nie może być pusta\")]):_vm._e()])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <v-layout>\n      <v-flex>\n        <h4\n          class=\"text-xs-center display-1 red--text text--darken-3 pt-3 font-weight-thin\"\n        >{{ this.$store.state.auth.name }}</h4>\n      </v-flex>\n    </v-layout>\n    <v-layout class=\"mt-3\">\n      <v-flex>\n        <v-card class=\"py-3\" height=\"400\" v-chat-scroll=\"{always:false, smooth:true}\">\n          <ul v-for=\"(msg, index) in messages\" :key=\"index\">\n            <li class=\"red--text text--darken-3 subheading mb-1\">\n              {{ msg.name }}\n              <span\n                class=\"body-1 font-weight-light grey--text text--darken-2 ml-3\"\n              >{{ msg.message }}</span>\n            </li>\n            <li class=\"subheading dark--text caption font-weight-thin mb-1\">{{ msg.createdAt }}</li>\n            <v-divider class=\"py-2\"></v-divider>\n          </ul>\n        </v-card>\n      </v-flex>\n    </v-layout>\n    <v-form @submit.prevent=\"send\">\n      <v-flex>\n        <v-card class=\"py-2\">\n          <v-layout align-center>\n            <v-text-field\n              v-model.trim=\"message\"\n              class=\"mx-5 font-weight-light body-2\"\n              placeholder=\"message\"\n              color=\"red darken-3\"\n              prepend-inner-icon=\"send\"\n            ></v-text-field>\n            <v-btn @click=\"send\" color=\"red darken-3\" flat>Wyślij</v-btn>\n          </v-layout>\n          <v-layout justify-center>\n            <p\n              v-if=\"feedback\"\n              class=\"red--text text--accent-3 font-weight-light subheading\"\n            >Wiadomość nie może być pusta</p>\n          </v-layout>\n        </v-card>\n      </v-flex>\n    </v-form>\n  </v-container>\n</template>\n\n<script>\nimport authAxios from \"@/auth-axios\";\n\nexport default {\n  name: \"Chat\",\n  data() {\n    return {\n      messages: [],\n      message: \"\",\n      token: localStorage.getItem(\"token\"),\n      ws: null,\n      feedback: false\n    };\n  },\n  methods: {\n    send() {\n      this.ws.send(\n        JSON.stringify({\n          message: this.message\n        })\n      );\n      this.message = \"\";\n    }\n  },\n  created: async function() {\n    // Get history\n    try {\n      const { data } = await authAxios(\"/chat/history\", {\n        headers: {\n          Authorization: `Basic ${this.token}`\n        }\n      });\n      const self = this;\n      data.messages.forEach(el => {\n        const tmp = new Date(el.createdAt);\n        el.createdAt =\n          tmp.getHours() +\n          \":\" +\n          (tmp.getMinutes() < 10 ? \"0\" + tmp.getMinutes() : tmp.getMinutes());\n\n        self.messages.push(el);\n      });\n\n      // Connect with Chat\n      this.ws = new WebSocket(\n        \"ws://localhost:8000/api/chat/live?token=\" + this.token\n      );\n      this.ws.addEventListener(\"message\", ({ data }) => {\n        const message = JSON.parse(data);\n        // Timestamp to hours:minutes\n        var tmp = new Date(message.createdAt);\n        message.createdAt =\n          tmp.getHours() +\n          \":\" +\n          (tmp.getMinutes() < 10 ? \"0\" + tmp.getMinutes() : tmp.getMinutes());\n        this.messages.push(message);\n      });\n    } catch (error) {}\n  }\n};\n</script>\n\n<style scoped lang='scss'>\nul {\n  list-style-type: none;\n}\n.v-card {\n  overflow-y: auto;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=6815141a&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=6815141a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6815141a\",\n  null\n  \n)\n\nexport default component.exports","module.exports = require(\"core-js/library/fn/json/stringify\");","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=6815141a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=6815141a&scoped=true&lang=scss&\""],"sourceRoot":""}